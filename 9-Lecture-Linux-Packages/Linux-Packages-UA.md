# Лекція: **Встановлення ПЗ в Linux — менеджери пакетів, репозиторії, apt/snap/PPA (порівняння з Windows)**

> У цій лекції розбираємо філософію встановлення програм у Linux, роль **менеджерів пакетів**, роботу з **репозиторіями**, базові команди **apt**, альтернативи **snap** і **PPA**, а також огляд менеджерів пакетів в інших дистрибутивах. Порівнюємо з підходом «майстрів» (installers) у Windows.

---

## Навчальні цілі
Після лекції ви зможете:
- Пояснити, **чому Linux віддає перевагу менеджерам пакетів** замість окремих інсталяторів.
- Описати, що таке **пакет** і **залежності**, та навіщо їх вирішує менеджер пакетів.
- Виконувати базові операції з **apt**: `update`, `search`, `install`, `remove`, оновлення системи.
- Розуміти призначення **репозиторіїв** (`/etc/apt/sources.list` і `sources.list.d`).
- Оцінювати, коли доречно використовувати **snap** або **PPA**, і які ризики це несе.
- Знати, які інструменти використовують інші сімейства дистрибутивів (Debian/Ubuntu vs Red Hat/Fedora тощо).

---

## План лекції
1. Філософія встановлення ПЗ в Linux
2. Що таке програмний пакет та залежності
3. Роль менеджера пакетів
4. **apt** для Debian/Ubuntu: головні команди
5. Репозиторії: звідки беруться пакети
6. Коли **apt** недостатньо: **snap** та **PPA**
7. Рекомендована ієрархія встановлення
8. Інші дистрибутиви та їх менеджери пакетів
9. Практикум (15–25 хв)
10. Поширені помилки та поради
11. Контрольні питання
12. Аналогія «Місто та склади»
13. Глосарій

---

## 1) Філософія встановлення ПЗ в Linux

На відміну від Windows, де ви зазвичай **завантажуєте .exe/.msi** і проходите майстра, у Linux типовий шлях — **менеджер пакетів**.  
Пряме завантаження архівів/бінарників можливе, але для системних інсталяцій це **не рекомендовано**: менеджер пакетів краще керує залежностями, безпекою й оновленнями.

---

## 2) Що таке програмний пакет?

**Пакет** — це стиснений архів із **виконуваними файлами, бібліотеками, конфігами, метаданими**. Майже всі програми мають **залежності** (інші пакети/бібліотеки, які потрібні для роботи).

---

## 3) Роль менеджера пакетів

Менеджер пакетів:
- **Автоматично вирішує залежності.** Наприклад, під час встановлення Firefox підтягне всі потрібні бібліотеки (навіть якщо в них є власні залежності).
- **Розкладає файли** у правильні місця файлової системи (бінарники, бібліотеки, конфіги, data).
- **Чисто видаляє** ПЗ з усіх місць (те, що вручну зробити важко і ризиковано).
- **Оновлює** пакети без перевстановлення вручну.
- Дає **централізовану точку керування**: пошук, встановлення, оновлення, видалення, перевірка стану.

---

## 4) `apt` (Advanced Package Tool) — Debian/Ubuntu

Більшість дистрибутивів мають вбудований менеджер. В Ubuntu (на базі Debian) — це **`apt`**.

Основні команди:
```bash
sudo apt update                       # оновити індекси репозиторіїв
apt search <ім'я_пакета>              # пошук пакета
sudo apt install <ім'я_пакета>        # встановити
sudo apt remove <ім'я_пакета>         # видалити (без конфігів)
sudo apt purge <ім'я_пакета>          # видалити разом із конфігами
sudo apt upgrade                      # оновити встановлені пакети
sudo apt full-upgrade                 # оновити з можливими змінами залежностей
sudo apt autoremove                   # прибрати непотрібні залежності
```

> **`apt` vs `apt-get`:** обидва доступні; `apt` дає **більш зручний вивід** і містить `search`. У щоденній роботі зазвичай достатньо `apt`.

---

## 5) Програмні репозиторії: звідки беруться пакети

- Репозиторії — це **онлайнові «склади»** з сотнями/тисячами пакетів.
- Конфігуруються у: **`/etc/apt/sources.list`** і файлах у **`/etc/apt/sources.list.d/`**.
- Переважна більшість ПЗ для вашої системи **надходить із офіційних репозиторіїв**.
- Перед інсталяціями робіть:
  ```bash
  sudo apt update
  ```

Корисно знати:
```bash
apt-cache policy <пакет>   # джерело, версії, пріоритети
```

---

## 6) Коли `apt` недостатньо: **GUI «Програми»**, **snap**, **PPA**

### GUI «Програми» (Ubuntu Software тощо)
Графічний пошук/встановлення. Під «капотом» може використовувати `apt`, **snap** (або інші технології).

### Менеджер пакетів **snap**
- **Snap** — новіший формат **самодостатніх пакетів**: усі залежності в одному «сніпі».
- Підходить для різних дистрибутивів; **автоматичні оновлення**.
- Приклад:
  ```bash
  sudo snap install <ім'я_пакета>
  ```
- **`apt` vs `snap`:** `apt` зазвичай кращий для системної інтеграції (менші завантаження, спільні залежності). **Snap-пакети більші** за розміром, бо містять усе всередині.

### Додаткові репозиторії (**PPA** — Personal Package Archives)
- Додають нові джерела пакетів для `apt`. Зручно для **новіших версій** або **нішевого ПЗ**.
- Приклад:
  ```bash
  sudo add-apt-repository ppa:<власник>/<архів>
  sudo apt update
  sudo apt install <пакет>
  ```
- **Застереження:** PPA **не перевіряються** дистрибутивом; перевіряйте репутацію автора, підписування й джерело.

> **Порада:** Якщо пакета немає в офіційних репозиторіях і snap недоступний — оцініть ризики **PPA**. Для розробницьких інструментів інколи зручні альтернативи на кшталт офіційних tar-архівів або менеджерів на рівні мови (napр., `pipx`, `npm`, `asdf`).

---

## 7) Рекомендована ієрархія встановлення

1. **`apt` з офіційних репозиторіїв** (≈ 80–90% випадків).
2. **`snap`**, якщо `apt` не дає потрібної версії і snap доступний.
3. **PPA** або інші додаткові репозиторії — обережно, за потреби.

---

## 8) Менеджери пакетів у різних сімействах дистрибутивів

- **Debian-сімейство (Ubuntu, Debian, Linux Mint):** `apt` / `apt-get`.
- **Red Hat-сімейство (RHEL, CentOS, Fedora):** традиційно `yum`, у сучасних релізах — **`dnf`** (часто сумісний із `yum`).  
- **Інші приклади (для ерудиції):** Arch — `pacman`, openSUSE — `zypper`, Alpine — `apk`.

> Хоч різні інструменти мають різний синтаксис, **концепція однакова**: беруть пакети з налаштованих репозиторіїв і **вирішують залежності**.

---

## 9) Практикум (15–25 хв)

> **Мета:** Попрактикувати повний цикл роботи з `apt` та спробувати альтернативи.

1. **Оновити індекси і переглянути оновлення**
   ```bash
   sudo apt update
   apt list --upgradable
   ```

2. **Пошук і встановлення пакета**
   ```bash
   apt search htop
   sudo apt install htop
   which htop && htop --version
   ```

3. **Видалення і очищення**
   ```bash
   sudo apt remove htop
   sudo apt autoremove
   ```

4. **Перевірити джерела**
   ```bash
   cat /etc/apt/sources.list | sed -n '1,20p'
   ls -1 /etc/apt/sources.list.d/
   ```

5. **Спробувати snap (за наявності)**
   ```bash
   snap list
   sudo snap install btop   # або інший доступний пакет
   ```

6. **Додати/прибрати PPA (на тестовій машині!)**
   ```bash
   sudo add-apt-repository ppa:<власник>/<архів>
   sudo apt update
   # ... установка пакета ...
   sudo add-apt-repository -r ppa:<власник>/<архів>
   sudo apt update
   ```

> *Результат:* розумієте цикл «оновити → встановити → оновити/видалити», джерела пакетів і альтернативи.

---

## 10) Поширені помилки та поради

- **Пропуск `sudo apt update`** перед пошуком/встановленням — бачите застарілу інформацію.
- **Безконтрольне додавання PPA** — ризики безпеки/конфлікти версій.
- **Плутанина `apt` vs `snap`** — уточнюйте, який інструмент використовується (GUI «Програми» може ставити snap).
- **Змішування джерел** (офіційні + сумнівні PPA) — може ламати оновлення залежностей.
- **Ігнорування виводу команди** — `apt` чітко показує, що саме буде встановлено/видалено.

---

## 11) Контрольні питання

1. Чому менеджери пакетів — рекомендований спосіб встановлення ПЗ у Linux?
2. Що таке **залежності** і хто ними керує?
3. Розкажіть про різницю між `apt install`, `apt remove`, `apt purge`, `apt autoremove`.
4. Навіщо потрібні **репозиторії** і де вони конфігуруються?
5. Коли доречно застосувати **snap** або **PPA**? Які ризики?
6. Які менеджери пакетів використовують **Debian/Ubuntu** і **RHEL/Fedora**?

---

## 12) Аналогія: «Linux — місто, репозиторії — склади»

- **Менеджер пакетів (apt/yum/dnf)** — «нова пошта»: знаходить доставку (пакет) на **складах (репозиторіях)**, перевіряє **комплектність (залежності)**, встановлює у потрібні «кімнати» й **прибирає без сліду** при видаленні.
- **Офіційні репозиторії** — великі перевірені склади міста.
- **`apt update`** — перевірити **нові надходження** й оновлення.
- **`snap`** — «універсальні коробки» з усім усередині: зручно, але важче й займає більше місця.
- **PPA** — приватні склади майстрів/дизайнерів: **потенційно корисно**, але вимагає **обережності**.
- **Різні дистрибутиви** — різні міста з власною службою доставки, але **принцип роботи однаковий**.

---

## 13) Глосарій

- **Пакет** — архів із файлами програми, метаданими та залежностями.
- **Залежності** — інші пакети, потрібні для роботи програми.
- **Менеджер пакетів** — інструмент для встановлення/оновлення/видалення (apt, yum/dnf, pacman, zypper, apk).
- **Репозиторій** — джерело пакетів для менеджера (онлайнові «склади»).
- **`apt`** — менеджер пакетів Debian/Ubuntu.
- **`snap`** — формат самодостатніх пакетів (із автооновленням).
- **`PPA`** — додатковий репозиторій для Ubuntu/Debian.
- **`yum` / `dnf`** — менеджери пакетів сімейства Red Hat.

---

> **Короткий підсумок:** Менеджери пакетів — стандартний і безпечний спосіб встановлювати ПЗ в Linux. Починайте з **`apt`** та офіційних репозиторіїв; використовуйте **`snap`** або **PPA** лише за потреби, зважуючи на розмір, безпеку та підтримуваність.
